<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This is the main function in EJAM that runs the analysis.
It does essentially what the web app does, to analyze/summarize near a set of points,
or in a set of polygons from a shapefile, or in a list of Census Units like Counties."><title>Get an EJ analysis (demographic and environmental indicators) in or near a list of locations — ejamit • EJAM</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get an EJ analysis (demographic and environmental indicators) in or near a list of locations — ejamit"><meta property="og:description" content="This is the main function in EJAM that runs the analysis.
It does essentially what the web app does, to analyze/summarize near a set of points,
or in a set of polygons from a shapefile, or in a list of Census Units like Counties."><meta property="og:image" content="https://usepa.github.io/EJAM/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">EJAM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Overview for EJAM Users</h6>
    <a class="dropdown-item" href="../articles/0_what_is_ejam.html">What is EJAM</a>
    <a class="dropdown-item" href="../articles/0_webapp.html">Using EJAM</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>For analysts using R</h6>
    <a class="dropdown-item" href="../articles/1_installing.html">1. Installing the EJAM R package</a>
    <a class="dropdown-item" href="../articles/2_quickstart.html">2. Quick Start Guide</a>
    <a class="dropdown-item" href="../articles/3_analyzing.html">3. Basics of Using EJAM for Analysis in RStudio</a>
    <a class="dropdown-item" href="../articles/4_advanced.html">4. Advanced Features</a>
    <a class="dropdown-item" href="../articles/5_ejscreenapi.html">5. Using the EJScreen API via EJAM</a>
    <a class="dropdown-item" href="../articles/6_future_plans.html">6. Future Plans and Ideas for EJAM</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/EJAM/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Get an EJ analysis (demographic and environmental indicators) in or near a list of locations</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EJAM/blob/HEAD/R/ejamit.R" class="external-link"><code>R/ejamit.R</code></a></small>
      <div class="d-none name"><code>ejamit.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is the main function in EJAM that runs the analysis.
It does essentially what the web app does, to analyze/summarize near a set of points,
or in a set of polygons from a shapefile, or in a list of Census Units like Counties.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ejamit</span><span class="op">(</span></span>
<span>  <span class="va">sitepoints</span>,</span>
<span>  radius <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  maxradius <span class="op">=</span> <span class="fl">31.07</span>,</span>
<span>  avoidorphans <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quadtree <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fips <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  shapefile_folder <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  countcols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  popmeancols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  calculatedcols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subgroups_type <span class="op">=</span> <span class="st">"nh"</span>,</span>
<span>  include_ejindexes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  calculate_ratios <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  extra_demog <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  need_proximityscore <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  infer_sitepoints <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  need_blockwt <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  threshold1 <span class="op">=</span> <span class="fl">90</span>,</span>
<span>  updateProgress <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  updateProgress_getblocks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  in_shiny <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  silentinteractive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  called_by_ejamit <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  testing <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>sitepoints</dt>
<dd><p>data.table with columns lat, lon giving point locations of sites or facilities around which are circular buffers</p></dd>


<dt>radius</dt>
<dd><p>in miles, defining circular buffer around a site point</p></dd>


<dt>maxradius</dt>
<dd><p>miles distance (max distance to check if not even 1 block point is within radius)</p></dd>


<dt>avoidorphans</dt>
<dd><p>logical If TRUE, then where not even 1 BLOCK internal point is within radius of a SITE,
it keeps looking past radius, up to maxradius, to find nearest 1 BLOCK.
What EJScreen does in that case is report NA, right?
So, does EJAM really need to report stats on residents presumed to be within radius,
if no block centroid is within radius?
Best estimate might be to report indicators from nearest block centroid
which is probably almost always the one your site is sitting inside of,
but ideally would adjust total count to be a fraction of blockwt
based on what is area of circular buffer as fraction of area of block it is apparently inside of.
Setting this to TRUE can produce unexpected results, which will not match EJScreen numbers.
Note that if creating a proximity score, by contrast, you
instead want to find nearest 1 SITE if none within radius of this BLOCK.</p></dd>


<dt>quadtree</dt>
<dd><p>(a pointer to the large quadtree object) created using indexblocks() which uses the SearchTree package.
Takes about 2-5 seconds to create this each time it is needed.
It can be automatically created when the package is attached via the .onAttach() function</p></dd>


<dt>fips</dt>
<dd><p>optional FIPS code vector to provide if using FIPS instead of sitepoints to specify places to analyze,
such as a list of US Counties or tracts. Passed to <code><a href="getblocksnearby_from_fips.html">getblocksnearby_from_fips()</a></code></p></dd>


<dt>shapefile_folder</dt>
<dd><p>optional path to folder that has shapefiles to analyze polygons</p></dd>


<dt>countcols</dt>
<dd><p>character vector of names of variables to aggregate within a buffer using a sum of counts,
like, for example, the number of people for whom a poverty ratio is known,
the count of which is the exact denominator needed to correctly calculate percent low income.</p></dd>


<dt>popmeancols</dt>
<dd><p>character vector of names of variables to aggregate within a buffer using population weighted mean.</p></dd>


<dt>calculatedcols</dt>
<dd><p>character vector of names of variables to aggregate within a buffer using formulas that have to be specified.</p></dd>


<dt>subgroups_type</dt>
<dd><p>Optional (uses default). Set this to "nh" for non-hispanic race subgroups
as in Non-Hispanic White Alone, nhwa and others in names_d_subgroups_nh;
"alone" for race subgroups like White Alone, wa and others in names_d_subgroups_alone;
"both" for both versions. Possibly another option is "original" or "default"
Alone means single race.</p></dd>


<dt>include_ejindexes</dt>
<dd><p>whether to try to include EJ Indexes (assuming dataset is available) - passed to <code><a href="doaggregate.html">doaggregate()</a></code></p></dd>


<dt>calculate_ratios</dt>
<dd><p>whether to calculate and return ratio of each indicator to US and State overall averages - passed to <code><a href="doaggregate.html">doaggregate()</a></code></p></dd>


<dt>extra_demog</dt>
<dd><p>if should include more indicators from v2.2 report on language etc.</p></dd>


<dt>need_proximityscore</dt>
<dd><p>whether to calculate proximity scores</p></dd>


<dt>infer_sitepoints</dt>
<dd><p>set to TRUE to try to infer the lat,lon of each site around which the blocks in sites2blocks were found.
lat,lon of each site will be approximated as average of nearby blocks,
although a more accurate slower way would be to use reported distance of each of 3 of the furthest block points and triangulate</p></dd>


<dt>need_blockwt</dt>
<dd><p>if fips parameter is used, passed to <code><a href="getblocksnearby_from_fips.html">getblocksnearby_from_fips()</a></code></p></dd>


<dt>threshold1</dt>
<dd><p>percentile like 80 or 90 or 95 to compare percentiles to
"alone" for groups like white alone (whether or not hispanic),
"both" may try to include both,
or possibly "original" or "default" might be added as options - passed to batch.summarize()</p></dd>


<dt>updateProgress</dt>
<dd><p>progress bar function passed to <code><a href="doaggregate.html">doaggregate()</a></code> in shiny app</p></dd>


<dt>updateProgress_getblocks</dt>
<dd><p>progress bar function passed to <code><a href="getblocksnearby.html">getblocksnearby()</a></code> in shiny app</p></dd>


<dt>in_shiny</dt>
<dd><p>if fips parameter is used, passed to <code><a href="getblocksnearby_from_fips.html">getblocksnearby_from_fips()</a></code></p></dd>


<dt>quiet</dt>
<dd><p>Optional. set to TRUE to avoid message about using <code><a href="getblocks_diagnostics.html">getblocks_diagnostics()</a></code>,
which is relevant only if a user saved the output of this function.</p></dd>


<dt>parallel</dt>
<dd><p>whether to use parallel processing in <code><a href="getblocksnearby.html">getblocksnearby()</a></code>, but not implemented yet.</p></dd>


<dt>silentinteractive</dt>
<dd><p>to prevent long output showing in console in RStudio when in interactive mode,
passed to <code><a href="doaggregate.html">doaggregate()</a></code> also. app server sets this to TRUE when calling doaggregate() but
<code>ejamit()</code> default is to set this to FALSE when calling <code><a href="doaggregate.html">doaggregate()</a></code>.</p></dd>


<dt>called_by_ejamit</dt>
<dd><p>Set to TRUE by <code>ejamit()</code> to suppress some outputs even if ejamit(silentinteractive=F)</p></dd>


<dt>testing</dt>
<dd><p>used while testing this function</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of tables of results</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="getblocksnearby.html">getblocksnearby()</a></code> <code><a href="doaggregate.html">doaggregate()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="co"># All in one step, using functions not shiny app:</span></span></span>
<span class="r-in"><span> <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">ejamit</span><span class="op">(</span><span class="va">testpoints_100_dt</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Finding blocks nearby.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>sitepoints did not contain a column named ejam_uniq_id, so one was added</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analyzing 100 points, radius of 2 miles around each.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Aggregating at each buffer and overall.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Percentages stored as 0 to 1 rather than 0 to 100 will not be shown correctly unless adjusted, </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>           because rounding info says 0 digits when the intent is to show 0 digits after the 0-100 percent number.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span> <span class="co"># Do not specify sitepoints and it will prompt you for a file,</span></span></span>
<span class="r-in"><span> <span class="co"># if in RStudio in interactive mode!</span></span></span>
<span class="r-in"><span> <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">ejamit</span><span class="op">(</span>radius <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Specify facilities or sites as points for test data,</span></span></span>
<span class="r-in"><span>  <span class="co"># use 1000 test facility points from the R package</span></span></span>
<span class="r-in"><span>  <span class="va">testsites</span> <span class="op">&lt;-</span> <span class="va">testpoints_1000</span></span></span>
<span class="r-in"><span>  <span class="co"># use facility points in an excel or csv file</span></span></span>
<span class="r-in"><span>   <span class="va">testsites</span> <span class="op">&lt;-</span> <span class="fu"><a href="latlon_from_anything.html">latlon_from_anything</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"testdata/latlon/"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"testpoints_207_sites_with_signif_violations_NAICS_326_ECHO.csv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"EJAM"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="co"># head(testsites)</span></span></span>
<span class="r-in"><span>  <span class="co"># use facility points from a random sample of EPA-regulated facilities</span></span></span>
<span class="r-in"><span>  <span class="va">testsites</span> <span class="op">&lt;-</span> <span class="fu"><a href="testpoints_n.html">testpoints_n</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Specify max distance from sites to look at (residents within X miles of site point)</span></span></span>
<span class="r-in"><span>  <span class="va">radius</span> <span class="op">&lt;-</span> <span class="fl">3.1</span> <span class="co"># miles</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Get summaries of all indicators near a set of points</span></span></span>
<span class="r-in"><span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">ejamit</span><span class="op">(</span><span class="va">testsites</span>, <span class="va">radius</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># out &lt;- ejamit("myfile.xlsx", 3.1)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># out2 &lt;- ejscreenit(testpoints_5)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># View results overall</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">results_overall</span><span class="op">)</span>, <span class="fl">3.1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># View plots</span></span></span>
<span class="r-in"><span>   <span class="fu">plot_distance_by_group</span><span class="op">(</span>results_bybg_people <span class="op">=</span> <span class="va">out</span><span class="op">$</span><span class="va">results_bybg_people</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="fu">distance_by_group</span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">results_bybg_people</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># View maps</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="mapfast.html">mapfast</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">results_bysite</span>, radius <span class="op">=</span> <span class="fl">3.1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># view results at a single site</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="mapfast.html">mapfast</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">results_bysite</span>, radius <span class="op">=</span> <span class="fl">3.1</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># all the raw numbers at one site</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">results_bysite</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># if doing just 1st step of ejamit()</span></span></span>
<span class="r-in"><span>  <span class="co">#  get distance between each site and every nearby Census block</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">s2b</span> <span class="op">&lt;-</span> <span class="va">testoutput_getblocksnearby_100pts_1miles</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="getblocks_diagnostics.html">getblocks_diagnostics</a></span><span class="op">(</span><span class="va">s2b</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">testsites</span> <span class="op">&lt;-</span> <span class="va">testpoints_10</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="va">s2b</span> <span class="op">&lt;-</span> <span class="fu"><a href="getblocksnearby.html">getblocksnearby</a></span><span class="op">(</span><span class="va">testsites</span>, radius <span class="op">=</span> <span class="fl">3.1</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="getblocks_diagnostics.html">getblocks_diagnostics</a></span><span class="op">(</span><span class="va">s2b</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="plotblocksnearby.html">plotblocksnearby</a></span><span class="op">(</span><span class="va">s2b</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># if doing just 2d step of ejamit()</span></span></span>
<span class="r-in"><span>  <span class="co">#  get summaries of all indicators based on table of distances</span></span></span>
<span class="r-in"><span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="doaggregate.html">doaggregate</a></span><span class="op">(</span><span class="va">s2b</span>, <span class="va">testsites</span><span class="op">)</span> <span class="co"># this works now and is simpler</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>DRAFT/beta</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>EJAM Version 2.2.2 beta</p>
</div>

    </footer></div>

  

  

  </body></html>

