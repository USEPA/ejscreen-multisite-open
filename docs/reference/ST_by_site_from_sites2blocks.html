<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get State that each site is in, from a table of ejam_uniq_id, blockid, distance — ST_by_site_from_sites2blocks • EJAM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get State that each site is in, from a table of ejam_uniq_id, blockid, distance — ST_by_site_from_sites2blocks"><meta property="og:description" content="Find the 2-character State abbreviation for each site. This is for when you need to know
the state each site is in, to be able to report state percentiles, but you do not have
the original list of ejam_uniq_id lat/lon or State info. This can infer the State
each site is located in, based on the state of the nearest block (and its parent blockgroup)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EJAM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/0_webapp.html">0. Using EJAM as a Web App</a>
    </li>
    <li>
      <a href="../articles/1_installing.html">1. Installing the EJAM package</a>
    </li>
    <li>
      <a href="../articles/2_quickstart.html">2. Quick Start Guide</a>
    </li>
    <li>
      <a href="../articles/3_analyzing.html">3. Basics of Using EJAM for Analysis in RStudio</a>
    </li>
    <li>
      <a href="../articles/4_advanced.html">4. Advanced Features</a>
    </li>
    <li>
      <a href="../articles/5_ejscreenapi.html">5. Using the EJScreen API via EJAM</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/USEPA/EJAM/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get State that each site is in, from a table of ejam_uniq_id, blockid, distance</h1>
    <small class="dont-index">Source: <a href="https://github.com/USEPA/EJAM/blob/HEAD/R/ST_by_site_from_sites2blocks.R" class="external-link"><code>R/ST_by_site_from_sites2blocks.R</code></a></small>
    <div class="hidden name"><code>ST_by_site_from_sites2blocks.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Find the 2-character State abbreviation for each site. This is for when you need to know
the state each site is in, to be able to report state percentiles, but you do not have
the original list of ejam_uniq_id lat/lon or State info. This can infer the State
each site is located in, based on the state of the nearest block (and its parent blockgroup).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ST_by_site_from_sites2blocks</span><span class="op">(</span><span class="va">sites2blocks</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sites2blocks</dt>
<dd><p>data.table or data.frame, like <a href="testoutput_getblocksnearby_10pts_1miles.html">testoutput_getblocksnearby_10pts_1miles</a>,
from <code><a href="getblocksnearby.html">getblocksnearby()</a></code> that has columns ejam_uniq_id and blockid and distance</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>data.table with columns  ejam_uniq_id, ST</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">fname</span> <span class="op">=</span> <span class="st">'./inst/testdata/testpoints_207_sites_with_signif_violations_NAICS_326_ECHO.csv'</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">=</span> <span class="fu">ST_by_site_from_sites2blocks</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="getblocksnearby.html">getblocksnearby</a></span><span class="op">(</span> <span class="fu"><a href="latlon_from_anything.html">latlon_from_anything</a></span><span class="op">(</span><span class="va">fname</span><span class="op">)</span>, quadtree <span class="op">=</span> <span class="va">localtree</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">=</span> <span class="fu">read_csv_or_xl</span><span class="op">(</span><span class="va">fname</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">x</span><span class="op">$</span><span class="va">ST</span> <span class="op">==</span> <span class="va">y</span><span class="op">$</span><span class="va">FacState</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span>  <span class="fu">ST_by_site_from_sites2blocks</span><span class="op">(</span><span class="va">testoutput_getblocksnearby_10pts_1miles</span><span class="op">)</span> </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ejam_uniq_id ST</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:            1 NJ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:            2 CO</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:            3 NC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:            4 ND</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:            5 MN</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:            7 TX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:            8 OH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:            9 FL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9:           10 AZ</span>
<span class="r-in"><span>  </span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Mark Corrales.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

