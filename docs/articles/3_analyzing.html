<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Basics of Using EJAM for Analysis in RStudio • EJAM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basics of Using EJAM for Analysis in RStudio">
<meta name="description" content="3. Basics of Using EJAM for Analysis in RStudio">
<meta property="og:description" content="3. Basics of Using EJAM for Analysis in RStudio">
<meta property="og:image" content="https://usepa.github.io/EJAM/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EJAM</a>

    <small class="nav-text text-warning me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.32.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Overview for EJAM Users</h6></li>
    <li><a class="dropdown-item" href="../articles/0_whatis.html">What is EJAM</a></li>
    <li><a class="dropdown-item" href="../articles/0_webapp.html">Using EJAM</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For analysts using R</h6></li>
    <li><a class="dropdown-item" href="../articles/1_installing.html">Installing the EJAM R package</a></li>
    <li><a class="dropdown-item" href="../articles/2_quickstart.html">Quick Start Guide</a></li>
    <li><a class="dropdown-item" href="../articles/3_analyzing.html">Basics of Using EJAM for Analysis in RStudio</a></li>
    <li><a class="dropdown-item" href="../articles/4_advanced.html">Advanced Features</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/EJAM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Basics of Using EJAM for Analysis in RStudio</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EJAM/blob/HEAD/vignettes/3_analyzing.Rmd" class="external-link"><code>vignettes/3_analyzing.Rmd</code></a></small>
      <div class="d-none name"><code>3_analyzing.Rmd</code></div>
    </div>

    
    
<p>This article provides examples of how to use EJAM in RStudio,
especially how to use more specialized functions to find specific places
to analyze, such as EPA-regulated facilities defined in various ways,
and how to explore the results in more detail than the web app can
provide.</p>
<div class="section level2">
<h2 id="running-a-basic-analysis">Running a Basic Analysis<a class="anchor" aria-label="anchor" href="#running-a-basic-analysis"></a>
</h2>
<ul>
<li><p><strong><code><a href="../reference/run_app.html">run_app()</a></code></strong> launches the web app
locally (to run in RStudio on a single computer rather than on a
server)</p></li>
<li><p><strong><code><a href="../reference/ejamit.html">ejamit()</a></code></strong> provides most results in
just one function (if you already have a list of places to analyze), as
shown in the <a href="https://usepa.github.io/EJAM/articles/2_quickstart.html">Quick
Start Guide</a></p></li>
</ul>
</div>
<div class="section level2">
<h2 id="tools-for-exploring-results">Tools for Exploring Results<a class="anchor" aria-label="anchor" href="#tools-for-exploring-results"></a>
</h2>
<p>For a standard analysis, the basic tools like
<code><a href="../reference/ejam2report.html">ejam2report()</a></code>, <code><a href="../reference/ejam2excel.html">ejam2excel()</a></code>,
<code><a href="../reference/ejam2map.html">ejam2map()</a></code>, etc. let you explore results, as shown in the
<a href="https://usepa.github.io/EJAM/articles/2_quickstart.html">Quick
Start Guide</a>.</p>
<p>If you want more ways to visualize and dig into results, examples are
provided below in the sections on <a href="#exploring-results">EXPLORING
RESULTS</a> and <a href="#visualization-of-findings-plots">VISUALIZATION
OF FINDINGS (PLOTS)</a>. For example, you can check which groups or
which facilities have notable findings.</p>
</div>
<div class="section level2">
<h2 id="tools-for-selecting-locations-to-analyze">Tools for Selecting Locations to Analyze<a class="anchor" aria-label="anchor" href="#tools-for-selecting-locations-to-analyze"></a>
</h2>
<p>EJAM offers a variety of ways to specify the places to be analyzed
and compared. The web app helps you select locations in several
ways.</p>
<p>If you are working in RStudio, and you already have identified the
points or areas to analyze, the [ejamit()] function will accept 1) point
coordinates, 2) a shapefile, or 3) a list of FIPS codes.</p>
<p>However, if you first need to get the points (lat, lon values), or
you need a more in-depth, custom approach to finding facilities or
Census places to analyze, there are several groups of functions to help
with that, as shown in all the examples below. They are also shown in
the <a href="https://usepa.github.io/EJAM/reference/index.html">EJAM
package reference manual</a>, by category.</p>
<p>You can specify locations for analysis in a variety of ways:</p>
<ul>
<li>
<strong>Near each point:</strong> Specify points and analyze
residents who are <a href="#near-each-point-proximity-analysis">NEAR
EACH POINT (PROXIMITY ANALYSIS)</a>
<ul>
<li>[<strong>Latitude and Longitude</strong>]</li>
<li>[<strong>Facilities by ID</strong>] can be defined <a href="#by-facility-using-epa-registry-id">by Facility, using EPA
Registry ID</a> or <a href="#by-facility-using-epa-program-system-id">by
Facility, using EPA Program System ID</a>
</li>
<li>[<strong>Facilities by Type</strong>] can be defined <a href="#by-industry-naics">by Industry (NAICS)</a> or <a href="#facilities-by-type">Facilities by Type</a> or by Clean Air Act
source category defined by <a href="#by-mact-subpart-hazardous-air-pollutant-source-category">by MACT
Subpart (hazardous air pollutant source category)</a>
</li>
</ul>
</li>
<li>
<strong>Within each polygon:</strong> Specify areas of any size and
shape to analyze residents within each polygon/zone/area (based on
shapefiles or Census FIPS codes)
<ul>
<li>
<strong>within areas or zones</strong> on a map if you have GIS data
in <a href="#shapefiles">SHAPEFILES</a> - Polygons (from shapefiles)
could for example define redlining zones, higher risk areas based on
modeling, etc.</li>
<li>
<strong>within Census units like cities or Counties</strong> defined
using <a href="#fips-codes">FIPS CODES</a> - Census Units such as
Counties or other types of Census Units are defined by FIPS code (e.g.,
Counties in one State).</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="near-each-point-proximity-analysis">NEAR EACH POINT (PROXIMITY ANALYSIS)<a class="anchor" aria-label="anchor" href="#near-each-point-proximity-analysis"></a>
</h2>
<div class="section level3">
<h3 id="latitude-and-longitude">Latitude and Longitude<a class="anchor" aria-label="anchor" href="#latitude-and-longitude"></a>
</h3>
<p>You can define locations as all residents within X miles of any one
or more of the specified points, and you can define those points in a
few ways. One way is to upload a table of coordinates – latitude and
longitude for each point, one row per site, with columns called lat and
lon (or some synonyms that work). There are also <a href="https://usepa.github.io/EJAM/reference/index.html#specify-points-by-lat-lon">more
detailed functions for working with latlon coordinates.</a></p>
<p>The simplest way to do that in the RStudio console is something like
<code>x &lt;- ejamit()</code>, which prompts you to upload a spreadsheet
with lat lon columns, and asks you for the radius.</p>
<p>As explained below, you can get the latitudes and longitudes of
EPA-regulated facilities if you want to specify a set of facilities by
uploading their Registry ID numbers in a table, or using other
identifiers. For example, there is a function
<code><a href="../reference/latlon_from_programid.html">latlon_from_programid()</a></code> in the examples below.</p>
<p>You can also get coordinates in a few other ways, such as by NAICS
(or SIC) industry names or codes, EPA program covering the set of
facilities (e.g., all greenhouse gas reporters), or a Clean Air Act MACT
subpart.</p>
</div>
<div class="section level3">
<h3 id="facilities-by-id">Facilities by ID<a class="anchor" aria-label="anchor" href="#facilities-by-id"></a>
</h3>
<p>EPA-regulated facilities can be found in the Facility Registry
Services by identification number.</p>
<div class="section level4">
<h4 id="by-facility-using-epa-registry-id">by Facility, using EPA Registry ID<a class="anchor" aria-label="anchor" href="#by-facility-using-epa-registry-id"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># note frs_from_regid() and latlon_from_regid() require the frs dataset, which they try to load on demand.</span></span>
<span></span>
<span><span class="fu"><a href="../reference/frs_from_regid.html">frs_from_regid</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">110071293460</span>, <span class="fl">110000333826</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## interactively upload file with table of REGISTRY_ID values</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/latlon_from_regid.html">latlon_from_regid</a></span><span class="op">(</span><span class="fu"><a href="../reference/read_csv_or_xl.html">read_csv_or_xl</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">REGISTRY_ID</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## and run through EJAM</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ejamit.html">ejamit</a></span><span class="op">(</span><span class="fu"><a href="../reference/latlon_from_regid.html">latlon_from_regid</a></span><span class="op">(</span><span class="fu"><a href="../reference/read_csv_or_xl.html">read_csv_or_xl</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">REGISTRY_ID</span><span class="op">)</span>, radius <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#  # still debugging Island Areas validation here!</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="by-facility-using-epa-program-system-id">by Facility, using EPA Program System ID<a class="anchor" aria-label="anchor" href="#by-facility-using-epa-program-system-id"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># latlon_from_programid() requires access to the frs_by_programid dataset, which it tries to load on demand.</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"frs_by_programid"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/latlon_from_programid.html">latlon_from_programid</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"XJW000012435"</span>, <span class="st">"00768SRTRSROAD1"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="facilities-by-type">Facilities by Type<a class="anchor" aria-label="anchor" href="#facilities-by-type"></a>
</h3>
<div class="section level4" data-link="by Industry (NAICS)">
<h4 id="by-industry-naics">by Industry (NAICS)<a class="anchor" aria-label="anchor" href="#by-industry-naics"></a>
</h4>
<p>You can specify sites by NAICS, but it is important to note the FRS
lacks NAICS info for many regulated facilities!</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"paint and coating"</span>, children <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> </span>
<span><span class="co">#&gt;      code     n2     n3     n4     n5     n6                            name</span></span>
<span><span class="co">#&gt;     &lt;num&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;                          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:  32551     32    325   3255  32551  32551 Paint and Coating Manufacturing</span></span>
<span><span class="co">#&gt; 2: 325510     32    325   3255  32551 325510 Paint and Coating Manufacturing</span></span>
<span><span class="co">#&gt; 3: 325510     32    325   3255  32551 325510 Paint and Coating Manufacturing</span></span>
<span><span class="co">#&gt;                                    num_name</span></span>
<span><span class="co">#&gt;                                      &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:  32551 - Paint and Coating Manufacturing</span></span>
<span><span class="co">#&gt; 2: 325510 - Paint and Coating Manufacturing</span></span>
<span><span class="co">#&gt; 3: 325510 - Paint and Coating Manufacturing</span></span>
<span><span class="co">## note latlon_from_naics() requires the frs_by_naics dataset, which it tries to load on demand. </span></span>
<span><span class="co"># head(latlon_from_naics(325510)) </span></span>
<span><span class="co"># has about 1,000 facilities  </span></span>
<span><span class="co">#</span></span>
<span><span class="co"># All sectors with this phrase in their NAICS title</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  x &lt;- ejamit(frs_from_naics("paint and coating"), 1)}</span></span></code></pre></div>
<p>See many more examples of <a href="#working-with-naics-codes-industry-codes">Working with NAICS Codes
(Industry Codes)</a>, in a section below.</p>
</div>
<div class="section level4">
<h4 id="by-epa-regulatory-program">by EPA Regulatory Program<a class="anchor" aria-label="anchor" href="#by-epa-regulatory-program"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># note latlon_from_programid() requires the frs and frs_by_programid datasets, which it tries to load on demand.</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"frs_by_programid"</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"frs"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="co">## Map of over 10,000 facilities in FRS identified as in the E-Grid power plant database</span></span>
<span>  </span>
<span>  <span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/latlon_from_program.html">latlon_from_program</a></span><span class="op">(</span><span class="st">"EGRID"</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="../reference/mapfast.html">mapfast</a></span><span class="op">(</span><span class="va">pts</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">## In just 1 State</span></span>
<span>  <span class="va">pts</span><span class="op">[</span>, <span class="va">ST</span> <span class="op">:=</span> <span class="fu"><a href="../reference/state_from_latlon.html">state_from_latlon</a></span><span class="op">(</span>lat <span class="op">=</span> <span class="va">lat</span>, lon <span class="op">=</span> <span class="va">lon</span><span class="op">)</span><span class="op">$</span><span class="va">ST</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="../reference/mapfast.html">mapfast</a></span><span class="op">(</span><span class="va">pts</span><span class="op">[</span><span class="va">ST</span> <span class="op">==</span> <span class="st">"TX"</span>, <span class="op">]</span>, radius <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## Largest lists</span></span>
<span>  </span>
<span>  <span class="va">epa_programs_counts</span> <span class="op">&lt;-</span> <span class="va">frs_by_programid</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="st">"program"</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>, <span class="op">]</span></span>
<span>  <span class="va">epa_programs_counts</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="op">-</span><span class="va">N</span><span class="op">)</span>, <span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">25</span>, <span class="op">]</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="by-mact-subpart-hazardous-air-pollutant-source-category">by MACT Subpart (hazardous air pollutant source category)<a class="anchor" aria-label="anchor" href="#by-mact-subpart-hazardous-air-pollutant-source-category"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># note latlon_from_mactsubpart() requires the frs_by_mact dataset, which it tries to load on demand</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"frs_by_mact"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="co"># Search by name of category</span></span>
<span>  <span class="va">mact_table</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"ethylene"</span>, <span class="va">mact_table</span><span class="op">$</span><span class="va">title</span>, ignore.case <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="op">]</span></span>
<span>  <span class="va">eto</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/latlon_from_mactsubpart.html">latlon_from_mactsubpart</a></span><span class="op">(</span><span class="st">"O"</span> <span class="op">)</span>, </span>
<span>    <span class="fu"><a href="../reference/latlon_from_mactsubpart.html">latlon_from_mactsubpart</a></span><span class="op">(</span><span class="st">"WWWWW"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co">#  Map the category</span></span>
<span>  <span class="fu"><a href="../reference/mapfast.html">mapfast</a></span><span class="op">(</span><span class="va">eto</span><span class="op">)</span></span>
<span>  </span>
<span>  </span>
<span>  <span class="co"># Browse the full list of categories</span></span>
<span>  <span class="co"># mact_table[ , c("N", "subpart", "title")]</span></span>
<span>  </span>
<span>  <span class="co"># The 10 largest categories</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">mact_table</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">mact_table</span><span class="op">$</span><span class="va">N</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"subpart"</span>, <span class="st">"title"</span><span class="op">)</span><span class="op">]</span>, <span class="fl">10</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Many facilities lack latitude longitude information in this database</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu"><a href="../reference/latlon_from_mactsubpart.html">latlon_from_mactsubpart</a></span><span class="op">(</span><span class="st">"A"</span>, include_if_no_latlon <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu"><a href="../reference/latlon_from_mactsubpart.html">latlon_from_mactsubpart</a></span><span class="op">(</span><span class="st">"A"</span>, include_if_no_latlon <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/latlon_from_mactsubpart.html">latlon_from_mactsubpart</a></span><span class="op">(</span><span class="st">"OOOO"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="working-with-naics-codes-industry-codes">Working with NAICS Codes (Industry Codes)<a class="anchor" aria-label="anchor" href="#working-with-naics-codes-industry-codes"></a>
</h3>
<div class="section level4">
<h4 id="naics-codes-to-map-or-analyze-facilities-in-one-industrial-sector">NAICS Codes to Map or Analyze Facilities in one Industrial
Sector<a class="anchor" aria-label="anchor" href="#naics-codes-to-map-or-analyze-facilities-in-one-industrial-sector"></a>
</h4>
<p>Overview of NAICS / industry categories, at n-digit level</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># see NAICS categories at the top (2-digit) level</span></span>
<span></span>
<span><span class="fu"><a href="../reference/naics_categories.html">naics_categories</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># see NAICS categories at the 3-digit level</span></span>
<span></span>
<span>  <span class="co"># sorted alphabetical</span></span>
<span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="fu"><a href="../reference/naics_categories.html">naics_categories</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span>,<span class="fu">.</span><span class="op">(</span><span class="va">name</span>,<span class="va">code</span><span class="op">)</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span>  <span class="co"># sorted by code</span></span>
<span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="fu"><a href="../reference/naics_categories.html">naics_categories</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">code</span><span class="op">)</span>,<span class="fu">.</span><span class="op">(</span><span class="va">code</span>,<span class="va">name</span><span class="op">)</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span></code></pre></div>
<p>Find NAICS codes, from the name of an industry</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">'paint'</span><span class="op">)</span></span></code></pre></div>
<p>Find industry names, from the NAICS codes</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get name from one code</span></span>
<span><span class="fu"><a href="../reference/naics_from_code.html">naics_from_code</a></span><span class="op">(</span><span class="fl">336</span><span class="op">)</span><span class="op">$</span><span class="va">name</span></span>
<span></span>
<span><span class="co"># get the name from each code</span></span>
<span><span class="fu"><a href="../reference/naics_from_code.html">naics_from_code</a></span><span class="op">(</span><span class="va">mycode</span><span class="op">)</span><span class="op">$</span><span class="va">name</span></span></code></pre></div>
<p>Count facilities by NAICS code</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mycode</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">33611</span>, <span class="fl">336111</span>, <span class="fl">336112</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># see counts of facilities by code (parent) and subcategories (children)</span></span>
<span><span class="va">naics_counts</span><span class="op">[</span><span class="va">NAICS</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">mycode</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># see parent codes that contain each code</span></span>
<span><span class="va">naicstable</span><span class="op">[</span><span class="va">code</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">mycode</span>, <span class="op">]</span></span></code></pre></div>
<p>Find facilities, by name of industry</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># See a data table of facilities in one industry</span></span>
<span><span class="fu"><a href="../reference/dataload_from_pins.html">dataload_from_pins</a></span><span class="op">(</span><span class="st">"frs"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Connecting to Posit Connect ??? at</span></span>
<span><span class="co">#&gt; &lt;https://rstudio-connect.dmap-stage.aws.epa.gov&gt;</span></span>
<span><span class="co">#&gt; Failed trying to connect to pins board server.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; frs          - is NOT in memory. Checking local disk... frs         is NOT found locally on disk at ~/../Downloads/EJAMbigfiles/frs.arrow </span></span>
<span><span class="co">#&gt; frs          - is NOT in local folder.</span></span>
<span><span class="co">#&gt;  and could NOT download frs - cannot connect to https://rstudio-connect.dmap-stage.aws.epa.gov/</span></span>
<span><span class="co">#&gt; Error : Invalid: Not a Feather V1 or Arrow IPC file</span></span>
<span><span class="co">#&gt; Error trying to download frs from public pins board via dataload_from_urlpins()  </span></span>
<span><span class="co">#&gt;  and could NOT download frs from public pins board via ejscreendata pkgdown site </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; frs         is NOT found locally on disk at ~/../Downloads/EJAMbigfiles/frs.arrow </span></span>
<span><span class="co">#&gt; trying to load frs  from EJAM/frs.rda</span></span>
<span><span class="co">#&gt; Client error: (404) Not Found</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  and could NOT download frs from DMAP AWS data commons</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"frs"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="va">industryword</span> <span class="op">&lt;-</span> <span class="st">"pulp"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span> <span class="fu"><a href="../reference/frs_from_naics.html">frs_from_naics</a></span><span class="op">(</span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="va">industryword</span><span class="op">)</span><span class="op">$</span><span class="va">code</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Quick map of EPA-regulated facilities in one industrial category,
which you can click on to see popup windows about sites.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># note frs_from_naics() requires the frs dataset, which it tries to load on demand.</span></span>
<span><span class="fu"><a href="../reference/dataload_from_pins.html">dataload_from_pins</a></span><span class="op">(</span><span class="st">"frs"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Connecting to Posit Connect ??? at</span></span>
<span><span class="co">#&gt; &lt;https://rstudio-connect.dmap-stage.aws.epa.gov&gt;</span></span>
<span><span class="co">#&gt; Failed trying to connect to pins board server.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; frs          - is NOT in memory. Checking local disk... frs         is NOT found locally on disk at ~/../Downloads/EJAMbigfiles/frs.arrow </span></span>
<span><span class="co">#&gt; frs          - is NOT in local folder.</span></span>
<span><span class="co">#&gt;  and could NOT download frs - cannot connect to https://rstudio-connect.dmap-stage.aws.epa.gov/</span></span>
<span><span class="co">#&gt; Error : Invalid: Not a Feather V1 or Arrow IPC file</span></span>
<span><span class="co">#&gt; Error trying to download frs from public pins board via dataload_from_urlpins()  </span></span>
<span><span class="co">#&gt;  and could NOT download frs from public pins board via ejscreendata pkgdown site </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; frs         is NOT found locally on disk at ~/../Downloads/EJAMbigfiles/frs.arrow </span></span>
<span><span class="co">#&gt; trying to load frs  from EJAM/frs.rda</span></span>
<span><span class="co">#&gt; Client error: (404) Not Found</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  and could NOT download frs from DMAP AWS data commons</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"frs"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="fu"><a href="../reference/mapfast.html">mapfast</a></span><span class="op">(</span><span class="fu"><a href="../reference/frs_from_naics.html">frs_from_naics</a></span><span class="op">(</span><span class="st">"smelt"</span><span class="op">)</span><span class="op">)</span> <span class="co"># may be slow the 1st time, if it loads frs dataset</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>(but note that this FRS dataset lacks NAICS for most facilities!)</p>
<p>Table of facilities in an industry, plus links to each facility in
ECHO and EJScreen</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">industryword</span> <span class="op">&lt;-</span> <span class="st">"chemical manuf"</span></span>
<span><span class="co">#  industryword &lt;- "smelt"</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"frs"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="va">mysites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/frs_from_naics.html">frs_from_naics</a></span><span class="op">(</span><span class="va">industryword</span>, children <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span></span>
<span><span class="va">regids</span> <span class="op">&lt;-</span> <span class="va">mysites</span><span class="op">$</span><span class="va">REGISTRY_ID</span></span>
<span><span class="va">link1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/url_echo_facility_webpage.html">url_echo_facility_webpage</a></span><span class="op">(</span><span class="va">regids</span>, as_html <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">link2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/url_ejscreen_report.html">url_ejscreen_report</a></span><span class="op">(</span>lat <span class="op">=</span> <span class="va">mysites</span><span class="op">$</span><span class="va">lat</span>, lon <span class="op">=</span> <span class="va">mysites</span><span class="op">$</span><span class="va">lon</span>, radius <span class="op">=</span> <span class="fl">3</span>, as_html <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">link3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/url_ejscreenmap.html">url_ejscreenmap</a></span><span class="op">(</span>lat <span class="op">=</span> <span class="va">mysites</span><span class="op">$</span><span class="va">lat</span>, lon <span class="op">=</span> <span class="va">mysites</span><span class="op">$</span><span class="va">lon</span>,  as_html <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co"># # same:</span></span>
<span><span class="co"># my_industry &lt;- naics_from_any("chemical manuf",children = F)[,.(code,name)]</span></span>
<span><span class="co"># mysites &lt;- frs_from_naics(my_industry$code)[,1:5]</span></span>
<span><span class="va">mysites</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>`ECHO report` <span class="op">=</span> <span class="va">link1</span>, </span>
<span>                 `EJScreen Report` <span class="op">=</span> <span class="va">link2</span>, `EJScreen Map` <span class="op">=</span> <span class="va">link3</span>,</span>
<span>                 <span class="va">mysites</span><span class="op">)</span></span>
<span><span class="va">caption</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mysites</span><span class="op">)</span>, <span class="st">' sites have NAICS matching "'</span>, <span class="va">industryword</span>, <span class="st">'"'</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mysites</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1500</span><span class="op">)</span> <span class="op">{</span><span class="va">mysites</span> <span class="op">&lt;-</span> <span class="va">mysites</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">1500</span>, <span class="op">]</span><span class="op">}</span> <span class="co"># &gt;2k rows is too much for client-side DataTables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">caption</span>,<span class="st">'\n'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span></span>
<span>    <span class="va">mysites</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>,</span>
<span>    escape <span class="op">=</span> <span class="cn">FALSE</span>,     rownames <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    caption <span class="op">=</span> <span class="va">caption</span>,</span>
<span>    filter <span class="op">=</span> <span class="st">"top"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Map of facilities in an industry, plus popups with links to each
facility in ECHO and EJScreen</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mapfast.html">mapfast</a></span><span class="op">(</span><span class="va">mysites</span><span class="op">)</span></span></code></pre></div>
<p>Facilities searches using industry codes or text in industry
names</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"plastics and rubber"</span><span class="op">)</span> </span>
<span><span class="co">#&gt;     code     n2     n3     n4     n5     n6</span></span>
<span><span class="co">#&gt;    &lt;num&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:   326     32    326    326    326    326</span></span>
<span><span class="co">#&gt;                                          name</span></span>
<span><span class="co">#&gt;                                        &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1: Plastics and Rubber Products Manufacturing</span></span>
<span><span class="co">#&gt;                                            num_name</span></span>
<span><span class="co">#&gt;                                              &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1: 326 - Plastics and Rubber Products Manufacturing</span></span>
<span></span>
<span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="fl">326</span><span class="op">)</span></span>
<span><span class="co">#&gt;     code     n2     n3     n4     n5     n6</span></span>
<span><span class="co">#&gt;    &lt;num&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:   326     32    326    326    326    326</span></span>
<span><span class="co">#&gt;                                          name</span></span>
<span><span class="co">#&gt;                                        &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1: Plastics and Rubber Products Manufacturing</span></span>
<span><span class="co">#&gt;                                            num_name</span></span>
<span><span class="co">#&gt;                                              &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1: 326 - Plastics and Rubber Products Manufacturing</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="fl">326</span>, children <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">[</span>,<span class="fu">.</span><span class="op">(</span><span class="va">code</span>,<span class="va">name</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;      code</span></span>
<span><span class="co">#&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:    326</span></span>
<span><span class="co">#&gt; 2:   3261</span></span>
<span><span class="co">#&gt; 3:  32611</span></span>
<span><span class="co">#&gt; 4: 326111</span></span>
<span><span class="co">#&gt; 5: 326112</span></span>
<span><span class="co">#&gt; 6: 326113</span></span>
<span><span class="co">#&gt;                                                                         name</span></span>
<span><span class="co">#&gt;                                                                       &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:                                Plastics and Rubber Products Manufacturing</span></span>
<span><span class="co">#&gt; 2:                                            Plastics Product Manufacturing</span></span>
<span><span class="co">#&gt; 3: Plastics Packaging Materials and Unlaminated Film and Sheet Manufacturing</span></span>
<span><span class="co">#&gt; 4:                                      Plastics Bag and Pouch Manufacturing</span></span>
<span><span class="co">#&gt; 5:     Plastics Packaging Film and Sheet (including Laminated) Manufacturing</span></span>
<span><span class="co">#&gt; 6:      Unlaminated Plastics Film and Sheet (except Packaging) Manufacturing</span></span>
<span></span>
<span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"pig"</span><span class="op">)</span> </span>
<span><span class="co">#&gt;      code     n2     n3     n4     n5     n6</span></span>
<span><span class="co">#&gt;     &lt;num&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:   1122     11    112   1122   1122   1122</span></span>
<span><span class="co">#&gt; 2:  11221     11    112   1122  11221  11221</span></span>
<span><span class="co">#&gt; 3: 112210     11    112   1122  11221 112210</span></span>
<span><span class="co">#&gt; 4:  32513     32    325   3251  32513  32513</span></span>
<span><span class="co">#&gt; 5: 325130     32    325   3251  32513 325130</span></span>
<span><span class="co">#&gt;                                       name</span></span>
<span><span class="co">#&gt;                                     &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:                     Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 2:                     Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 3:                     Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 4: Synthetic Dye and Pigment Manufacturing</span></span>
<span><span class="co">#&gt; 5: Synthetic Dye and Pigment Manufacturing</span></span>
<span><span class="co">#&gt;                                            num_name</span></span>
<span><span class="co">#&gt;                                              &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:                       1122 - Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 2:                      11221 - Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 3:                     112210 - Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 4:  32513 - Synthetic Dye and Pigment Manufacturing</span></span>
<span><span class="co">#&gt; 5: 325130 - Synthetic Dye and Pigment Manufacturing</span></span>
<span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"pig "</span><span class="op">)</span> <span class="co"># space after g</span></span>
<span><span class="co">#&gt;      code     n2     n3     n4     n5     n6                name</span></span>
<span><span class="co">#&gt;     &lt;num&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;              &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:   1122     11    112   1122   1122   1122 Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 2:  11221     11    112   1122  11221  11221 Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 3: 112210     11    112   1122  11221 112210 Hog and Pig Farming</span></span>
<span><span class="co">#&gt;                        num_name</span></span>
<span><span class="co">#&gt;                          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:   1122 - Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 2:  11221 - Hog and Pig Farming</span></span>
<span><span class="co">#&gt; 3: 112210 - Hog and Pig Farming</span></span>
<span></span>
<span><span class="co"># a OR b,  a AND b,  etc.</span></span>
<span><span class="va">a</span> <span class="op">=</span> <span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"plastics"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">b</span> <span class="op">=</span> <span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"rubber"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/setops.html" class="external-link">fintersect</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span><span class="op">[</span>,<span class="fu">.</span><span class="op">(</span><span class="va">name</span>,<span class="va">code</span><span class="op">)</span><span class="op">]</span> <span class="co">#  a AND b</span></span>
<span><span class="co">#&gt;                                                   name   code</span></span>
<span><span class="co">#&gt;                                                 &lt;char&gt;  &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:          Plastics and Rubber Products Manufacturing    326</span></span>
<span><span class="co">#&gt; 2: Rubber and Plastics Hoses and Belting Manufacturing  32622</span></span>
<span><span class="co">#&gt; 3: Rubber and Plastics Hoses and Belting Manufacturing 326220</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/setops.html" class="external-link">funion</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span><span class="op">[</span>,<span class="fu">.</span><span class="op">(</span><span class="va">name</span>,<span class="va">code</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>     <span class="co">#  a OR  b</span></span>
<span><span class="co">#&gt;                                                                         name</span></span>
<span><span class="co">#&gt;                                                                       &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:                                 Plastics Material and Resin Manufacturing</span></span>
<span><span class="co">#&gt; 2:                                Plastics and Rubber Products Manufacturing</span></span>
<span><span class="co">#&gt; 3:                                            Plastics Product Manufacturing</span></span>
<span><span class="co">#&gt; 4: Plastics Packaging Materials and Unlaminated Film and Sheet Manufacturing</span></span>
<span><span class="co">#&gt; 5:                                      Plastics Bag and Pouch Manufacturing</span></span>
<span><span class="co">#&gt; 6:     Plastics Packaging Film and Sheet (including Laminated) Manufacturing</span></span>
<span><span class="co">#&gt;      code</span></span>
<span><span class="co">#&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: 325211</span></span>
<span><span class="co">#&gt; 2:    326</span></span>
<span><span class="co">#&gt; 3:   3261</span></span>
<span><span class="co">#&gt; 4:  32611</span></span>
<span><span class="co">#&gt; 5: 326111</span></span>
<span><span class="co">#&gt; 6: 326112</span></span>
<span></span>
<span><span class="co"># naics_subcodes_from_code(funion(a,b)[,code])[,.(name,code)]   #  plus children</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/setops.html" class="external-link">funion</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span><span class="op">[</span>,<span class="va">code</span><span class="op">]</span>, children <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">[</span>,<span class="fu">.</span><span class="op">(</span><span class="va">name</span>,<span class="va">code</span><span class="op">)</span><span class="op">]</span> <span class="op">)</span> <span class="co">#  same</span></span>
<span><span class="co">#&gt;                                                                         name</span></span>
<span><span class="co">#&gt;                                                                       &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:                                Plastics and Rubber Products Manufacturing</span></span>
<span><span class="co">#&gt; 2:                                            Plastics Product Manufacturing</span></span>
<span><span class="co">#&gt; 3: Plastics Packaging Materials and Unlaminated Film and Sheet Manufacturing</span></span>
<span><span class="co">#&gt; 4:                                      Plastics Bag and Pouch Manufacturing</span></span>
<span><span class="co">#&gt; 5:     Plastics Packaging Film and Sheet (including Laminated) Manufacturing</span></span>
<span><span class="co">#&gt; 6:      Unlaminated Plastics Film and Sheet (except Packaging) Manufacturing</span></span>
<span><span class="co">#&gt;      code</span></span>
<span><span class="co">#&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:    326</span></span>
<span><span class="co">#&gt; 2:   3261</span></span>
<span><span class="co">#&gt; 3:  32611</span></span>
<span><span class="co">#&gt; 4: 326111</span></span>
<span><span class="co">#&gt; 5: 326112</span></span>
<span><span class="co">#&gt; 6: 326113</span></span></code></pre></div>
<p>A NAICS code can have many “children” or subcategories under it</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dataload_from_pins.html">dataload_from_pins</a></span><span class="op">(</span><span class="st">"frs"</span>, <span class="st">"frs_by_naics"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Connecting to Posit Connect ??? at</span></span>
<span><span class="co">#&gt; &lt;https://rstudio-connect.dmap-stage.aws.epa.gov&gt;</span></span>
<span><span class="co">#&gt; Failed trying to connect to pins board server.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; frs          - is NOT in memory. Checking local disk... frs         is NOT found locally on disk at ~/../Downloads/EJAMbigfiles/frs.arrow </span></span>
<span><span class="co">#&gt; frs          - is NOT in local folder.</span></span>
<span><span class="co">#&gt;  and could NOT download frs - cannot connect to https://rstudio-connect.dmap-stage.aws.epa.gov/</span></span>
<span><span class="co">#&gt; Error : Invalid: Not a Feather V1 or Arrow IPC file</span></span>
<span><span class="co">#&gt; Error trying to download frs from public pins board via dataload_from_urlpins()  </span></span>
<span><span class="co">#&gt;  and could NOT download frs from public pins board via ejscreendata pkgdown site </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; frs         is NOT found locally on disk at ~/../Downloads/EJAMbigfiles/frs.arrow </span></span>
<span><span class="co">#&gt; trying to load frs  from EJAM/frs.rda</span></span>
<span><span class="co">#&gt; Client error: (404) Not Found</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  and could NOT download frs from DMAP AWS data commons</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"frs"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"frs_from_naics"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"chem"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># about 20</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"chem"</span>, children <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># &gt;100</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="fu"><a href="../reference/frs_from_naics.html">frs_from_naics</a></span><span class="op">(</span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"chem"</span><span class="op">)</span><span class="op">$</span><span class="va">code</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># a few thousand</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="fu"><a href="../reference/frs_from_naics.html">frs_from_naics</a></span><span class="op">(</span><span class="fu"><a href="../reference/naics_from_any.html">naics_from_any</a></span><span class="op">(</span><span class="st">"chem"</span>, children <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">$</span><span class="va">code</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># &gt;10,000</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="shapefiles">SHAPEFILES<a class="anchor" aria-label="anchor" href="#shapefiles"></a>
</h2>
<div class="section level4">
<h4 id="polygons-in-shapefiles-as-the-places-to-compare">Polygons in shapefiles as the places to compare<a class="anchor" aria-label="anchor" href="#polygons-in-shapefiles-as-the-places-to-compare"></a>
</h4>
<p>You can upload polygons in a shapefile, and use EJAM to analyze them.
See the Shiny app.</p>
<p>See shapefile_from_any() and related functions:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/shapefile_from_any.html">shapefile_from_any</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/shapefile_from_sitepoints.html">shapefile_from_sitepoints</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/shape_buffered_from_shapefile.html">shape_buffered_from_shapefile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/shape_buffered_from_shapefile_points.html">shape_buffered_from_shapefile_points</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">shp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/shapefile_from_gdbzip.html">shapefile_from_gdbzip</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testdata/shapes/portland.gdb.zip"</span>, package <span class="op">=</span> <span class="st">"EJAM"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="fips-codes">FIPS CODES<a class="anchor" aria-label="anchor" href="#fips-codes"></a>
</h2>
<div class="section level4">
<h4 id="counties-as-the-places-to-compare">Counties as the places to compare<a class="anchor" aria-label="anchor" href="#counties-as-the-places-to-compare"></a>
</h4>
<p>You can compare places defined by FIPS code, such as a group of US
Counties.</p>
<p>Compare all Counties in a State, using EJAM indicators</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Get FIPS of each county in Delaware</span></span>
<span><span class="va">mystate</span> <span class="op">&lt;-</span> <span class="st">"Delaware"</span></span>
<span><span class="va">cfips</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fips_counties_from_statename.html">fips_counties_from_statename</a></span><span class="op">(</span><span class="va">mystate</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## You could launch a web browser tab for each of the counties,</span></span>
<span><span class="co">##  to see each of the County reports from EJScreen, like this:</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># sapply(url_ejscreen_report(areaid = cfips), browseURL)</span></span>
<span></span>
<span><span class="co">## Analyze EJ stats for each county in the State</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ejamit.html">ejamit</a></span><span class="op">(</span>fips <span class="op">=</span> <span class="va">cfips</span><span class="op">)</span> <span class="co"># radius not used</span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">results_bysite</span>, escape <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ejam2table_tall.html">ejam2table_tall</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">results_bysite</span><span class="op">[</span> , <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">'ejam_uniq_id'</span>, <span class="st">'pop'</span>, <span class="va">names_d_subgroups_ratio_to_state_avg</span><span class="op">)</span>, with <span class="op">=</span> <span class="cn">F</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/mapfastej_counties.html">mapfastej_counties</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">results_bysite</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fips2countyname.html">fips2countyname</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">results_bysite</span><span class="op">$</span><span class="va">ejam_uniq_id</span><span class="op">)</span></span>
<span><span class="co">#cnames &lt;- c("Kent County", "New Castle County", "Sussex County")</span></span>
<span><span class="co">#cnames &lt;- gsub(" County", "", cnames)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">results_bysite</span><span class="op">$</span><span class="va">pctlowinc</span>, names.arg <span class="op">=</span> <span class="va">cnames</span>,</span>
<span>        main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'% Low Income by County in '</span>, <span class="va">mystate</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Another example</span></span>
<span><span class="va">mystate</span> <span class="op">&lt;-</span> <span class="st">"Maryland"</span></span>
<span><span class="va">vname</span> <span class="op">&lt;-</span> <span class="st">"% low income"</span></span>
<span><span class="va">xmd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ejamit.html">ejamit</a></span><span class="op">(</span>fips <span class="op">=</span> <span class="fu"><a href="../reference/fips_counties_from_statename.html">fips_counties_from_statename</a></span><span class="op">(</span><span class="va">mystate</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">ggblanket</span><span class="fu">::</span><span class="fu"><a href="https://davidhodge931.github.io/ggblanket/reference/gg_col.html" class="external-link">gg_col</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">xmd</span><span class="op">$</span><span class="va">results_bysite</span>,</span>
<span>                  y <span class="op">=</span> <span class="va">pctlowinc</span>,</span>
<span>                  x <span class="op">=</span> <span class="va">ejam_uniq_id</span>,</span>
<span>                  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">vname</span>, <span class="st">' by County in '</span>, <span class="va">mystate</span><span class="op">)</span>,</span>
<span>                  y_title <span class="op">=</span> <span class="va">vname</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/mapfastej_counties.html">mapfastej_counties</a></span><span class="op">(</span><span class="va">xmd</span><span class="op">$</span><span class="va">results_bysite</span>, <span class="st">'state.pctile.pctlowinc'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="exploring-results">EXPLORING RESULTS<a class="anchor" aria-label="anchor" href="#exploring-results"></a>
</h2>
<div class="section level4">
<h4 id="the-most-striking-findings-e-g--which-group-is-most-overrepresented">The most striking findings (e.g., which group is most
overrepresented?)<a class="anchor" aria-label="anchor" href="#the-most-striking-findings-e-g--which-group-is-most-overrepresented"></a>
</h4>
<p>See examples above using ejam2report() but also you can check some
key findings like this:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">testoutput_ejamit_1000pts_1miles</span> </span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">$</span><span class="va">results_bysite</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/setDF.html" class="external-link">setDF</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ratio_benchmarks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.01</span>, <span class="fl">1.50</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">ratiodata</span> <span class="op">&lt;-</span> <span class="va">out</span><span class="op">[</span>, <span class="va">names_d_ratio_to_state_avg</span><span class="op">]</span></span>
<span></span>
<span><span class="va">findings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/count_sites_with_n_high_scores.html">count_sites_with_n_high_scores</a></span><span class="op">(</span><span class="va">ratiodata</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>  <span class="co"># long output to console !</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">findings</span><span class="op">$</span><span class="va">text</span><span class="op">[</span><span class="va">findings</span><span class="op">$</span><span class="va">text</span> <span class="op">!=</span> <span class="st">""</span><span class="op">]</span>, <span class="fl">1</span><span class="op">)</span> <span class="co"># the most extreme finding!</span></span>
<span><span class="co">#&gt; [1] "At at least 3% of these sites, 1 of the indicators is 5 times the average "</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="the-key-facilities-e-g--which-has-the-max-of-or-has-multiple-elevated-ej-indexes">The key facilities (e.g., which has the max of – or has multiple
elevated – EJ indexes?)<a class="anchor" aria-label="anchor" href="#the-key-facilities-e-g--which-has-the-max-of-or-has-multiple-elevated-ej-indexes"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ejamit.html">ejamit</a></span><span class="op">(</span></span>
<span>  sitepoints <span class="op">=</span>  <span class="va">testpoints_100</span>,</span>
<span>  radius <span class="op">=</span> <span class="fl">3.1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">out2</span><span class="op">$</span><span class="va">results_summarized</span><span class="op">$</span><span class="va">cols</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="more-summary-findings">More summary findings<a class="anchor" aria-label="anchor" href="#more-summary-findings"></a>
</h4>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span><span class="op">(</span><span class="va">findings</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="va">findings</span><span class="op">$</span><span class="va">text</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "At at least 93% of these sites, 1 of the indicators is 1.01 times the average "</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">findings</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span> , , <span class="fl">1</span><span class="op">]</span>, <span class="fl">15</span><span class="op">)</span></span>
<span><span class="co">#&gt;      cut</span></span>
<span><span class="co">#&gt; count 1.01   2   5  10</span></span>
<span><span class="co">#&gt;     0   67 709 974 997</span></span>
<span><span class="co">#&gt;     1  189 165  26   3</span></span>
<span><span class="co">#&gt;     2  171  52   0   0</span></span>
<span><span class="co">#&gt;     3  117  36   0   0</span></span>
<span><span class="co">#&gt;     4   92  19   0   0</span></span>
<span><span class="co">#&gt;     5   91  11   0   0</span></span>
<span><span class="co">#&gt;     6   73   5   0   0</span></span>
<span><span class="co">#&gt;     7   90   3   0   0</span></span>
<span><span class="co">#&gt;     8  106   0   0   0</span></span>
<span><span class="co">#&gt;     9    4   0   0   0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">findings</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span> , <span class="fl">1</span>, <span class="op">]</span>, <span class="fl">21</span><span class="op">)</span></span>
<span><span class="co">#&gt;      stat</span></span>
<span><span class="co">#&gt; count count  cum pct cum_pct</span></span>
<span><span class="co">#&gt;     0    67 1000   7     100</span></span>
<span><span class="co">#&gt;     1   189  933  19      93</span></span>
<span><span class="co">#&gt;     2   171  744  17      74</span></span>
<span><span class="co">#&gt;     3   117  573  12      57</span></span>
<span><span class="co">#&gt;     4    92  456   9      46</span></span>
<span><span class="co">#&gt;     5    91  364   9      36</span></span>
<span><span class="co">#&gt;     6    73  273   7      27</span></span>
<span><span class="co">#&gt;     7    90  200   9      20</span></span>
<span><span class="co">#&gt;     8   106  110  11      11</span></span>
<span><span class="co">#&gt;     9     4    4   0       0</span></span>
<span><span class="va">x</span> <span class="op">=</span> <span class="va">findings</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span> , <span class="fl">1</span>, <span class="op">]</span> </span>
<span><span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">[</span>, <span class="st">"cum_pct"</span><span class="op">]</span> <span class="op">&gt;=</span> <span class="fl">50</span> <span class="op">&amp;</span> <span class="va">x</span><span class="op">[</span>, <span class="st">"cum_pct"</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="fl">80</span>, <span class="op">]</span></span>
<span><span class="co">#&gt;      stat</span></span>
<span><span class="co">#&gt; count count cum pct cum_pct</span></span>
<span><span class="co">#&gt;     2   171 744  17      74</span></span>
<span><span class="co">#&gt;     3   117 573  12      57</span></span>
<span><span class="va">findings</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span> <span class="fl">1</span>, , <span class="op">]</span></span>
<span><span class="co">#&gt;       stat</span></span>
<span><span class="co">#&gt; cut    count  cum pct cum_pct</span></span>
<span><span class="co">#&gt;   1.01    67 1000   7     100</span></span>
<span><span class="co">#&gt;   2      709 1000  71     100</span></span>
<span><span class="co">#&gt;   5      974 1000  97     100</span></span>
<span><span class="co">#&gt;   10     997 1000 100     100</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="site-by-site-detailed-results-in-datatable-format-in-rstudio-viewer">Site by site detailed results in datatable format in RStudio
viewer:<a class="anchor" aria-label="anchor" href="#site-by-site-detailed-results-in-datatable-format-in-rstudio-viewer"></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out2</span> <span class="op">&lt;-</span> <span class="va">testoutput_ejamit_100pts_1miles</span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">out2</span><span class="op">$</span><span class="va">results_bysite</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,   <span class="op">]</span>, escape <span class="op">=</span> <span class="cn">FALSE</span>, rownames <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To see all 1,000 sites in table:</span></span>
<span><span class="co">#DT::datatable(out2$results_bysite[1:1000, ], escape = FALSE, rownames = FALSE)</span></span></code></pre></div>
<div class="section level4">
<h4 id="overall-results-for-a-few-key-indicators-as-raw-output-in-console">Overall results for a few key indicators, as raw output in
console:<a class="anchor" aria-label="anchor" href="#overall-results-for-a-few-key-indicators-as-raw-output-in-console"></a>
</h4>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out2</span> <span class="op">&lt;-</span> <span class="va">testoutput_ejamit_100pts_1miles</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">out2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "results_overall"                     "results_bysite"                     </span></span>
<span><span class="co">#&gt; [3] "results_bybg_people"                 "longnames"                          </span></span>
<span><span class="co">#&gt; [5] "count_of_blocks_near_multiple_sites" "results_summarized"                 </span></span>
<span><span class="co">#&gt; [7] "formatted"                           "sitetype"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span> <span class="va">out2</span><span class="op">$</span><span class="va">results_overall</span><span class="op">[</span> , <span class="va">..names_d</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  overall   </span></span>
<span><span class="co">#&gt; Demog.Index      1.640289  </span></span>
<span><span class="co">#&gt; Demog.Index.Supp 1.631243  </span></span>
<span><span class="co">#&gt; pctlowinc        0.3199508 </span></span>
<span><span class="co">#&gt; pctlingiso       0.07993421</span></span>
<span><span class="co">#&gt; pctunemployed    0.06199302</span></span>
<span><span class="co">#&gt; pctlths          0.1343483 </span></span>
<span><span class="co">#&gt; pctunder5        0.05552895</span></span>
<span><span class="co">#&gt; pctover64        0.1447244 </span></span>
<span><span class="co">#&gt; pctmin           0.5595154</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span> <span class="va">out2</span><span class="op">$</span><span class="va">results_overall</span><span class="op">[</span> , <span class="va">..names_d_subgroups</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 overall    </span></span>
<span><span class="co">#&gt; pcthisp         0.2788923  </span></span>
<span><span class="co">#&gt; pctnhba         0.1472757  </span></span>
<span><span class="co">#&gt; pctnhaa         0.0873758  </span></span>
<span><span class="co">#&gt; pctnhaiana      0.002454578</span></span>
<span><span class="co">#&gt; pctnhnhpia      0.001571147</span></span>
<span><span class="co">#&gt; pctnhotheralone 0.005819709</span></span>
<span><span class="co">#&gt; pctnhmulti      0.03612613 </span></span>
<span><span class="co">#&gt; pctnhwa         0.4404846</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="overall-results-for-the-very-long-list-of-all-indicators-as-raw-output-in-console">Overall results for the very long list of all indicators, as raw
output in console:<a class="anchor" aria-label="anchor" href="#overall-results-for-the-very-long-list-of-all-indicators-as-raw-output-in-console"></a>
</h4>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out2</span> <span class="op">&lt;-</span> <span class="va">testoutput_ejamit_100pts_1miles</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/ejam2table_tall.html">ejam2table_tall</a></span><span class="op">(</span><span class="va">out2</span><span class="op">)</span></span>
<span>  , <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co"># head(</span></span>
<span><span class="co">#   cbind(as.list(out2$results_overall))</span></span>
<span><span class="co">#   , 12)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="just-one-site-all-the-indicators">Just one site, all the indicators<a class="anchor" aria-label="anchor" href="#just-one-site-all-the-indicators"></a>
</h3>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/ejam2table_tall.html">ejam2table_tall</a></span><span class="op">(</span><span class="va">out2</span>, sitenumber <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  , <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<div class="section level5">
<h5 id="see-indicators-aggregated-over-all-people-across-all-sites">See indicators aggregated over all people across all sites<a class="anchor" aria-label="anchor" href="#see-indicators-aggregated-over-all-people-across-all-sites"></a>
</h5>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## view output of batch run aggregation ####</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="va">testoutput_ejamit_1000pts_1miles</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span> <span class="va">out</span><span class="op">$</span><span class="va">results_overall</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 overall</span></span>
<span><span class="co">#&gt; EJScreen Report NA     </span></span>
<span><span class="co">#&gt; EJScreen Map    NA     </span></span>
<span><span class="co">#&gt; ECHO report     NA     </span></span>
<span><span class="co">#&gt; ejam_uniq_id    NA     </span></span>
<span><span class="co">#&gt; valid           TRUE   </span></span>
<span><span class="co">#&gt; invalid_msg     ""</span></span>
<span></span>
<span><span class="co">## To see just some subset of indicators, like Environmental only:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span> <span class="va">out</span><span class="op">$</span><span class="va">results_overall</span><span class="op">[</span> , <span class="va">..names_e</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 overall  </span></span>
<span><span class="co">#&gt; pm              9.4237   </span></span>
<span><span class="co">#&gt; o3              65.9796  </span></span>
<span><span class="co">#&gt; no2             11.08754 </span></span>
<span><span class="co">#&gt; dpm             0.3321597</span></span>
<span><span class="co">#&gt; rsei            4227.326 </span></span>
<span><span class="co">#&gt; traffic.score   4083324  </span></span>
<span><span class="co">#&gt; pctpre1960      0.4255891</span></span>
<span><span class="co">#&gt; proximity.npl   1.036089 </span></span>
<span><span class="co">#&gt; proximity.rmp   0.7589651</span></span>
<span><span class="co">#&gt; proximity.tsdf  10.38343 </span></span>
<span><span class="co">#&gt; ust             8.573221 </span></span>
<span><span class="co">#&gt; proximity.npdes 50125.2  </span></span>
<span><span class="co">#&gt; drinking        NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span> <span class="va">out</span><span class="op">$</span><span class="va">results_overall</span><span class="op">[</span> , <span class="va">..names_d</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  overall   </span></span>
<span><span class="co">#&gt; Demog.Index      1.718163  </span></span>
<span><span class="co">#&gt; Demog.Index.Supp 1.765287  </span></span>
<span><span class="co">#&gt; pctlowinc        0.3356696 </span></span>
<span><span class="co">#&gt; pctlingiso       0.09735858</span></span>
<span><span class="co">#&gt; pctunemployed    0.06679282</span></span>
<span><span class="co">#&gt; pctlths          0.1511022 </span></span>
<span><span class="co">#&gt; pctunder5        0.05880198</span></span>
<span><span class="co">#&gt; pctover64        0.1396016 </span></span>
<span><span class="co">#&gt; pctmin           0.5856438</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span> <span class="va">out</span><span class="op">$</span><span class="va">results_overall</span><span class="op">[</span> , <span class="va">..names_d_subgroups</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 overall    </span></span>
<span><span class="co">#&gt; pcthisp         0.3341704  </span></span>
<span><span class="co">#&gt; pctnhba         0.1156517  </span></span>
<span><span class="co">#&gt; pctnhaa         0.09142377 </span></span>
<span><span class="co">#&gt; pctnhaiana      0.002953629</span></span>
<span><span class="co">#&gt; pctnhnhpia      0.001746431</span></span>
<span><span class="co">#&gt; pctnhotheralone 0.00578322 </span></span>
<span><span class="co">#&gt; pctnhmulti      0.03391459 </span></span>
<span><span class="co">#&gt; pctnhwa         0.4143562</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span> <span class="va">out</span><span class="op">$</span><span class="va">results_overall</span><span class="op">[</span> , <span class="va">..names_e_pctile</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                        overall</span></span>
<span><span class="co">#&gt; pctile.pm              81     </span></span>
<span><span class="co">#&gt; pctile.o3              74     </span></span>
<span><span class="co">#&gt; pctile.no2             82     </span></span>
<span><span class="co">#&gt; pctile.dpm             87     </span></span>
<span><span class="co">#&gt; pctile.rsei            84     </span></span>
<span><span class="co">#&gt; pctile.traffic.score   88     </span></span>
<span><span class="co">#&gt; pctile.pctpre1960      69     </span></span>
<span><span class="co">#&gt; pctile.proximity.npl   91     </span></span>
<span><span class="co">#&gt; pctile.proximity.rmp   74     </span></span>
<span><span class="co">#&gt; pctile.proximity.tsdf  91     </span></span>
<span><span class="co">#&gt; pctile.ust             87     </span></span>
<span><span class="co">#&gt; pctile.proximity.npdes 95     </span></span>
<span><span class="co">#&gt; pctile.drinking        NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span> <span class="va">out</span><span class="op">$</span><span class="va">results_overall</span><span class="op">[</span> , <span class="va">..names_d_pctile</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                         overall</span></span>
<span><span class="co">#&gt; pctile.Demog.Index      70     </span></span>
<span><span class="co">#&gt; pctile.Demog.Index.Supp 63     </span></span>
<span><span class="co">#&gt; pctile.pctlowinc        61     </span></span>
<span><span class="co">#&gt; pctile.pctlingiso       85     </span></span>
<span><span class="co">#&gt; pctile.pctunemployed    69     </span></span>
<span><span class="co">#&gt; pctile.pctlths          73     </span></span>
<span><span class="co">#&gt; pctile.pctunder5        61     </span></span>
<span><span class="co">#&gt; pctile.pctover64        41     </span></span>
<span><span class="co">#&gt; pctile.pctmin           71</span></span>
<span><span class="co"># cbind(overall = as.list( out$results_overall[ , ..names_ej_pctile])); cat("\n")</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="visualization-of-findings-plots">VISUALIZATION OF FINDINGS (PLOTS)<a class="anchor" aria-label="anchor" href="#visualization-of-findings-plots"></a>
</h2>
<div class="section level3">
<h3 id="indicators">Indicators<a class="anchor" aria-label="anchor" href="#indicators"></a>
</h3>
<div class="section level4">
<h4 id="barplot-showing-which-indicator-is-most-elevated-overall">Barplot showing which indicator is most elevated overall<a class="anchor" aria-label="anchor" href="#barplot-showing-which-indicator-is-most-elevated-overall"></a>
</h4>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="va">testoutput_ejamit_1000pts_1miles</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ejam2barplot.html">ejam2barplot</a></span><span class="op">(</span><span class="va">out</span>,</span>
<span>  varnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">names_d_ratio_to_state_avg</span>, <span class="va">names_d_subgroups_ratio_to_state_avg</span><span class="op">)</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Demographics at Selected Sites Compared to State Averages"</span><span class="op">)</span></span></code></pre></div>
<p><img src="3_analyzing_files/figure-html/barplot_d-1.png" alt="Barplot of ratios of demographic indicators at selected sites to State averages. It is a series of bars where some are above a ratio of 1, and one is more than 2 times the State average of supplemental demographic index." width="700"></p>
</div>
<div class="section level4">
<h4 id="histogram-of-indicators-distribution-over-all-people-across-all-sites">Histogram of indicators distribution over all people across all
sites<a class="anchor" aria-label="anchor" href="#histogram-of-indicators-distribution-over-all-people-across-all-sites"></a>
</h4>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">results_bysite</span><span class="op">$</span><span class="va">pctile.traffic.score</span>, <span class="fl">10</span>, xlab <span class="op">=</span> <span class="st">"Local traffic scores (expressed as a percentile)"</span>, </span>
<span>     ylab <span class="op">=</span> <span class="st">"count of sites in each bin, out of 1,000 sites"</span>, freq <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>     main <span class="op">=</span> <span class="st">"Actual distribution of scores nearby, as percentiles, </span></span>
<span><span class="st">     vs flat line = USA overall"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">results_bysite</span><span class="op">)</span><span class="op">/</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p><img src="3_analyzing_files/figure-html/histo-1.png" alt="Histogram of distribution of scores nearby, in ten decile bins, as percentiles versus a flat line representing the US overall, an expected count of 100 sites per decile, out of 1,000 sites total. Bars in the first three deciles (low traffic scores) are above the expected 100 line, meaning these sites have an overrepresentation of sites with low traffic scores compared to the US overall." width="700"></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>US EPA 2024</p>
</div>

<div class="pkgdown-footer-right">
  <p>EJAM Version 2.32.0</p>
</div>

    </footer>
</div>





  </body>
</html>
