#######################################################################################################
#
# EPA data, layers, APIs, services from EPA: 
# 

Listing of many or all EPA REST services that are on geoplatform:
  https://geopub.epa.gov/arcgis/rest/services

Example of EJScreen data - one set of layers on geoplatform:
  https://geopub.epa.gov/arcgis/rest/services/ejscreen/Socioeconomic_Indicators_2022_Public/MapServer

Non-ArcGIS EPA APIs/ services examples:

  https://www.epa.gov/enviro/web-services and https://www.epa.gov/enviro/envirofacts-data-service-api
  https://www.epa.gov/frs/facility-registry-service-frs-api
  https://echo.epa.gov/tools/web-services
  https://www.epa.gov/ejscreen/ejscreen-api
  https://docs.airnowapi.org/
  https://www.epa.gov/airmarkets/cam-api-portal
  https://watersgeo.epa.gov/openapi/waters/#/

Government-wide repository of APIs and guidelines on creating them

  api.data.gov is a free API management service for federal agencies. Our aim is to make it easier for agencies to release and manage APIs.
  
Some useful map services to query  
  # https://geopub.epa.gov/arcgis/sdk/rest/index.html#/Query_Map_Service_Layer/02ss0000000r000000/
  # https://geopub.epa.gov/arcgis/sdk/rest/index.html#/Map_Service/02ss0000006v000000/
  # 'https://geopub.epa.gov/arcgis/rest/services/ejscreen/ejquery/MapServer/'
  # MaxRecordCount: 1000
  # https://geopub.epa.gov/arcgis/rest/services/ejscreen/ejquery/MapServer/7/2?f=pjson 
  #
  # Block weights 2010 - Centroids with statistic weight factors for both 2010 Census SF3 and 2012 ACS, block level:
  # https://geopub.epa.gov/arcgis/rest/services/ejscreen/ejquery/MapServer/71
  

#######################################################################################################
#
# Using R to access (or create) APIs


Using APIs via existing R interfaces to those APIs:

  (Many packages already wrap various APIs, to help you access something like Google APIs, etc., etc.):
  https://gargle.r-lib.org/ is one example, https://cran.r-project.org/web/packages/rorcid/index.html is another

Using APIs by Wrapping them/ writing code to use APIs, from R:

  https://cran.r-project.org/web/packages/httr/vignettes/api-packages.html 
  https://cran.r-project.org/web/views/WebTechnologies.html  for much more & related topics

Creating your own API, with R (or in Fed Govt in general):

  https://www.rplumber.io/  or   https://appsilon.com/r-rest-api/ 
  see https://api.data.gov/docs/developer-manual/  for federal guidelines


#######################################################################################################
#
# BASIC HELP DOCS
#
   Getting started on ArcGIS REST API

https://gispub.epa.gov/arcgis/sdk/rest/#/Get_started/02ss00000048000000/
https://gispub.epa.gov/arcgis/sdk/rest/#/Resources_and_operations/02ss00000053000000/
https://gispub.epa.gov/arcgis/sdk/rest/#/Using_spatial_references/02ss00000026000000/

   Query a Map Service Layer

Documentation of format and examples of input parameters:
  https://geopub.epa.gov/arcgis/sdk/rest/index.html#/Query_Map_Service_Layer/02ss0000000r000000/

   Example of some R code at EPA:
  https://github.com/mhweber/RGroupLighningTalk/blob/master/RGroupLighningTalk.Rmd

#######################################################################################################
#
# points, polygons 
#

https://gispub.epa.gov/arcgis/sdk/rest/#/Geometry_objects/02ss0000008m000000/

Example of one point:
{"x" : -118.15, "y" : 33.80, "spatialReference" : {"wkid" : 4326}}

Example of 4 points:
{
  "points" : [[-97.06138,32.837],[-97.06133,32.836],[-97.06124,32.834],[-97.06127,32.832]],
  "spatialReference" : {"wkid" : 4326}
}

Example of  a feature object (geometry plus attributes):
{
  "geometry" : {"x" : -118.15, "y" : 33.80},

  "attributes" : {
    "OWNER" : "Joe Smith",
    "VALUE" : 94820.37,
    "APPROVED" : true,
    "LASTUPDATE" : 1227663551096
  }
}

#######################################################################################################
#
# Distance calculations from arcgis as service
#
https://gispub.epa.gov/arcgis/rest/services/Utilities/Geometry/GeometryServer/distance
https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-Query.html#distance 

# ArcGIS Help page on Creating buffers:
#
https://gispub.epa.gov/arcgis/sdk/rest/#/Create_Buffers/02ss000001s1000000/


# example where I tried to get distances between points:

https://gispub.epa.gov/arcgis/rest/services/Utilities/Geometry/GeometryServer/distance?sr=4326&geometry1=%7B%22geometry%22+%3A+%7B%22x%22+%3A+-118.15%2C+%22y%22+%3A+33.80%7D%7D&geometry2=%7B%22geometry%22+%3A+%7B%22x%22+%3A+-118.15%2C+%22y%22+%3A+33.80%7D%7D&geodesic=false&distanceUnit=Miles&f=html


